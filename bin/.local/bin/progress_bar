#!/bin/sh

if [ "$#" -ne 2 ]; then
    echo "Usage:" 1>&2
    printf '\t%s %s' "$(basename "$0")" '<step> <final>' 1>&2
    echo  " (with <step> >= 0 and <final> > 0)" 1>&2
    exit 1
fi

if [ "$1" -ge 0 ] && [ "$2" -gt 0 ]; then
    step="$1"
    final="$2"
    cols="$(( $(tput cols) - 7 ))"
    step_perc="$(( step * 100 / final ))"
    step_pos="$(( step * cols / final ))"
    step_posn="$(( step_pos + 1 ))"

    printf '%s' "["
    [ "${step_pos}" -ne 0 ] && printf '#%.0s' $(seq ${step_pos})
    [ "${step_pos}" -ne "${cols}" ] && printf ' %.0s' $(seq ${step_posn} ${cols})
    printf '] %3d%%' ${step_perc}
    [ "${step}" -eq "${final}" ] && printf '\n' || printf '\r'
else
    echo "<step> < 0 or <final> < 1" 1>&2
    exit 1
fi


# Local Variables:
# Mode: shell-script
# End:
