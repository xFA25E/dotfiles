#!/bin/sh

get_duration() {
    mediainfo "${1:?}" | grep -m 1 '^Duration\>' \
        | cut -d":" -f 2- \
        | awk '
BEGIN {
    type["h"] = 3600
    type["min"] = 60
    type["s"] = 1
}

{
    sum = 0
    for (i = 1; i <= NF; i++) {
        sum += $i * type[$(++i)]
    }
    print sum
}
'
}

print_duration() {
    duration="$(get_duration "${1:?provide video}")"
    if [ -n "${duration}" ]; then
        echo "${duration} ${1:?provide video}"
    fi
}


if [ "${#}" -eq 0 ]; then
    while read -r video; do
        print_duration "${video}"
    done
else
    for video in "${@}"; do
        print_duration "${video}"
    done
fi
